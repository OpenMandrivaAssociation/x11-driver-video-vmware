From 0b34df288f0e163750962e0e59f5e329642ca457 Mon Sep 17 00:00:00 2001
From: Thomas Hellstrom <thellstrom@vmware.com>
Date: Tue, 27 Nov 2018 16:36:21 +0100
Subject: [PATCH 3/6] vmwgfx: Fix a memory leak

We were leaking a pointer to a drm encoder.

Signed-off-by: Thomas Hellstrom <thellstrom@vmware.com>
Reviewed-by: Brian Paul <brianp@vmware.com>
---
 vmwgfx/vmwgfx_output.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/vmwgfx/vmwgfx_output.c b/vmwgfx/vmwgfx_output.c
index ec31e2c..f589226 100644
--- a/vmwgfx/vmwgfx_output.c
+++ b/vmwgfx/vmwgfx_output.c
@@ -642,6 +642,7 @@ xorg_output_init(ScrnInfoPtr pScrn)
 	if (drm_encoder) {
 	    output->possible_crtcs = drm_encoder->possible_crtcs;
 	    output->possible_clones = drm_encoder->possible_clones;
+	    drmModeFreeEncoder(drm_encoder);
 	} else {
 	    output->possible_crtcs = 0;
 	    output->possible_clones = 0;
-- 
2.20.1

